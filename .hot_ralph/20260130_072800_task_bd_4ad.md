I'll implement the Decoder Main API. Let me first understand the current codebase structure and what's already implemented.Now let me read the existing decoder.zig and related files to understand what's already implemented.Now let me also read the value.zig to understand the Value type and JSON conversion capabilities.Now I have a clear picture of what exists. Looking at the decoder, I can see it has:

1. `Decoder` struct with `decode()` method - converts TOON to `Value`
2. `EventBuilder` for streaming events
3. `decode()` and `decodeWithOptions()` public functions
4. `decodeToEvents()` and `decodeToEventsWithOptions()` for event-based output

What's missing for a complete "Main API" that matches what toon_rust provides:

1. **`toonToJson()`** - Convert TOON string to JSON string (the high-level API users actually want)
2. **`toonToJsonWithOptions()`** - Same with options
3. **Writer-based streaming API** - `decodeToWriter()` for memory-efficient JSON output

Let me check what the task description actually needs and look at existing similar reference implementations.Let me implement the Main API. I'll add the high-level `toonToJson()` function and streaming writer support to the decoder.Now I'll add the Main API functions. I need to add:
1. `toonToJson()` - Convert TOON string to JSON string
2. `toonToJsonWithOptions()` - Same with options  
3. `decodeToWriter()` - Streaming writer-based APINow I need to add the helper functions `valueToJson` and `writeValueAsJson`. Let me add them after the existing public API functions:Now I'll add the JSON conversion helper functions right after the `decodeToEventsWithOptions` function:Now I need to add the WriteError to the errors module. Let me check what errors already exist:I need to add `WriteError` to the error set:Now let me update the test for the error count:Now let me update the todo list and add tests for the new API functions:Now let me add tests for the new API functions. I'll add them at the end of the test section in decoder.zig:Now I'll add the tests for the new API functions:Now let me update root.zig to export the new API functions:Now let's run the tests to validate everything works:I need to fix the switch statement - `\n`, `\r`, and `\t` are in the 0x00-0x1F range. Let me fix that:All tests pass. Let me update the todo list and then commit:Now let's commit the changes:The task is complete. Here's a summary of what was implemented:

**Decoder Main API Implementation:**

1. **`toonToJson()`** - Converts TOON input to JSON string (primary high-level API)
2. **`toonToJsonWithOptions()`** - Same with custom decode options
3. **`decodeToWriter()`** - Memory-efficient streaming output to any writer
4. **`decodeToWriterWithOptions()`** - Same with custom options  
5. **`valueToJson()`** - Converts a Value to JSON string

**Supporting Changes:**
- Added `WriteError` to the error set for I/O operations
- Implemented proper JSON string escaping (handles quotes, backslashes, newlines, tabs, and control characters)
- Proper number formatting (integers vs floats, NaN/Infinity become null)
- Exported `EventBuilder` and all new API functions in `root.zig`
- Added comprehensive tests covering all new functionality

**Validation:** `zig build test` passes successfully.